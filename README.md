# CommerceCoupons
Купоны для Commerce  на базе модуля управления таблицами webixTable (https://github.com/webber12/webixtable)

Компонент состоит из аддона для модуля webixTable и плагина для Commerce.

# Возможности аддона:

- 1. Генерация купонов, в том числе автоматическая
- 2. Возможность задать дату начала и окончания действия купона (группы купонов - при генерации)
- 3. Возможность задать скидку в % либо в фикс. сумме
- 4. Активные/неактивные купоны
- 5. Возможность задать для купона лимит покупок с его применением (по-умолчанию 1)
- 6. Группировка купонов по смысловым категориям (имя купона при генерации)
- 7. Возможность задать длину купона
.. ну  ит.п.


# Задача плагина: максимально упростить использование сгенерированных купонов.
- 1. прослушивание событий добавления купона в корзине (возможно задать перечень страниц для прослушивания)
- 2. пересчет итоговой суммы корзины с учетом скидки в % (приоритет) либо фикс суммы
- 3. подсчет статистики (занесение информации о связке "номер заказа - номер купона" в отдельную таблицу
- 4. удаление данных о купоне из сессии после совершения заказа пользователем


# Использование на фронте:
- 1. Добавить атрибут data-commerce-coupon к полю, куда будет вводиться номер купона
- 2. Добавить атрибут data-commerce-coupon-add к кнопке "Применить купон"

# Дополнительные js-события
- при действии с купонами генерируются дополнительные js-события
- commerce-coupon-empty - пользователь не ввел купон в поле, но нажал на кнопку
- commerce-coupon-error-unactive - данный купон не активен либо не найден в базе либо по нему истекли сроки
- commerce-coupon-error-limits - по данному купону исчерпан лимит заказов
- commerce-coupon-ok-add - купон добавлен в корзину

Соответственно, данные события можно прослушивать и добавлять свои действия, например
        <script>
        $(document).ready(function(){
            $(document).on("commerce-coupon-ok-add", function(){
                alert("Купон успешно добавлен, скидка учтена");
            })
        }
        </script>




